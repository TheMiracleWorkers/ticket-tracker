(this["webpackJsonpticket-tracker"]=this["webpackJsonpticket-tracker"]||[]).push([[0],{229:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(71),s=n.n(r),c=n(146),o=n.n(c),l=n(187),d=n(7),u=(n(229),n(36)),j=n(422),h=n(423),b=n(424),m=n(425),p=n(426),O=n(430),x=n(431),g=n(6),f=n(454),v=n(460),w=n(448),y=n(427),S=n(428),C=n(429),k=n(51),D=n(0),_=function(e){return{width:250,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden",backgroundColor:"#F6F4F5",border:0}},P=function(e){return{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)"),backgroundColor:"#F6F4F5",border:0}},I=Object(g.a)(f.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(u.a)(Object(u.a)({whiteSpace:"nowrap",boxSizing:"border-box"},n&&{"#side-menu & .MuiDrawer-paper":_(t)}),!n&&{"#side-menu & .MuiDrawer-paper":P(t)})}));function T(){var e=a.useState(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],r={0:{text:"Home",element:Object(D.jsx)(j.a,{}),to:"/"},1:{text:"Tickets",element:Object(D.jsx)(h.a,{}),to:"/tickets"},2:{text:"Projects",element:Object(D.jsx)(b.a,{}),to:"/projects"},3:{text:"Users",element:Object(D.jsx)(m.a,{}),to:"/users"},4:{text:"Settings",element:Object(D.jsx)(p.a,{}),to:"/settings"}};return Object(D.jsx)("div",{id:"side-menu",children:Object(D.jsxs)(I,{variant:"permanent",open:n,children:[Object(D.jsx)(v.a,{children:Object.keys(r).map((function(e){return Object(D.jsxs)(w.a,{button:!0,role:"button",component:k.a,to:r[e].to,children:[Object(D.jsx)(y.a,{children:r[e].element}),Object(D.jsx)(S.a,{primary:r[e].text})]},e)}))}),Object(D.jsx)(C.a,{}),n?Object(D.jsx)(w.a,{button:!0,onClick:function(){i(!1),document.getElementById("content").classList.toggle("open"),document.getElementById("top-header").classList.toggle("open")},children:Object(D.jsx)(x.a,{})}):Object(D.jsx)(w.a,{button:!0,onClick:function(){i(!0),document.getElementById("content").classList.toggle("open"),document.getElementById("top-header").classList.toggle("open")},children:Object(D.jsx)(O.a,{})})]})})}var q=n(437),U=n(438),F=n(465),Y=n(466),B=n(463),E=n(23),A=n(3),W=n(38),L=n(196),M=n.n(L),N=n(353),V=Object(g.a)("div")((function(e){var t=e.theme;return Object(A.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(N.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(N.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%",border:"1px solid #000"},t.breakpoints.up("sm"),{marginLeft:t.spacing(0),width:"auto"})})),R=Object(g.a)("div")((function(e){return{padding:e.theme.spacing(0),height:"100%",position:"absolute",pointerEvents:"none",right:10,display:"flex",alignItems:"center",justifyContent:"center",marginRi:0}})),z=Object(g.a)(W.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,3),paddingLeft:"calc(1em + ".concat(t.spacing(1),")"),width:"100%"}}})),H=function(e){var t=e.placeholder,n=(e.label,e.name),a=e.value,i=e.onChange;return Object(D.jsxs)(V,{style:{marginRight:16},children:[Object(D.jsx)(R,{children:Object(D.jsx)(M.a,{})}),Object(D.jsx)(z,{placeholder:t,name:n,value:a,onChange:i})]})},J=n(451),G=n(464),Q=n(453),X=n(126),K=n(449),Z=n(50),$=n(48),ee=n(468),te=n(436),ne=n(15),ae=n(16),ie=function(){function e(t){Object(ne.a)(this,e),this.id=void 0,this.title=void 0,this.description=void 0,this.status=void 0,this.dueDate=void 0,this.createdDate=void 0,this.updatedDate=void 0,this.priority=void 0,this.project=void 0,this.project_name=void 0,this.assignedUserId=void 0,this.assignedUserName=void 0,this.id=t.id?t.id:null,this.title=t.title,this.description=t.description,this.status=t.status?t.status:"Open",this.dueDate=t.due_date?new Date(t.due_date):null,this.createdDate=t.created_at?new Date(t.created_at):null,this.updatedDate=t.updated_at?new Date(t.updated_at):null,this.priority=t.priority?t.priority:null,this.project=t.project?t.project:null,this.project_name=t.project_name,this.assignedUserId=t.assigned_user?t.assigned_user:null,this.assignedUserName=t.assigned_username}return Object(ae.a)(e,[{key:"toJSON",value:function(){var e,t;return{id:this.id?this.id:"",title:this.title,description:this.description,due_date:this.dueDate?this.dueDate.toISOString():null,created_at:null===(e=this.createdDate)||void 0===e?void 0:e.toUTCString(),updated_at:null===(t=this.createdDate)||void 0===t?void 0:t.toUTCString(),priority:this.priority,status:this.status,project:this.project,project_name:this.project_name,assigned_user:this.assignedUserId,assigned_username:this.assignedUserName}}}]),e}(),re=n(82),se=n.n(re),ce=function(){function e(){Object(ne.a)(this,e),this.apiUrl="https://sheltered-bastion-53879.herokuapp.com/",this.axiosInstance=se.a.create({baseURL:this.apiUrl,headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}})}return Object(ae.a)(e,[{key:"getAllTicketsPromise",value:function(){return this.axiosInstance.request({method:"GET",url:"/tickets"})}},{key:"getTicketByIdPromise",value:function(e){return this.axiosInstance.request({method:"GET",url:"/tickets/"+e})}},{key:"postTicket",value:function(e){return this.axiosInstance.request({method:"POST",url:"/tickets/",data:e.toJSON()})}},{key:"updateTicketPromise",value:function(e){return this.axiosInstance.request({method:"PUT",url:"/tickets/"+e.id+"/",data:e.toJSON()})}},{key:"getAllProjectPromise",value:function(){return this.axiosInstance.request({method:"GET",url:"/projects"})}},{key:"getProjectByIdPromise",value:function(e){return this.axiosInstance.request({method:"GET",url:"/projects/"+e})}},{key:"postProject",value:function(e){return this.axiosInstance.request({method:"POST",url:"/projects/",data:e.toJSON()})}},{key:"updateProjectPromise",value:function(e){return this.axiosInstance.request({method:"PUT",url:"/projects/"+e.id+"/",data:e.toJSON()})}},{key:"deleteProject",value:function(e){return this.axiosInstance.delete("/projects/"+e.id+"/")}}]),e}(),oe=n(435),le=n(441),de=n(442),ue=function(){function e(t){Object(ne.a)(this,e),this.id=void 0,this.name=void 0,this.id=t.id?t.id:null,this.name=t.name}return Object(ae.a)(e,[{key:"toJSON",value:function(){return{id:this.id?this.id:"",name:this.name}}}]),e}(),je=function(){function e(t){Object(ne.a)(this,e),this.id=void 0,this.url=void 0,this.username=void 0,this.email=void 0,this.groups=void 0,this.last_login=void 0,this.date_joined=void 0,this.id=t.id?t.id:null,this.url=t.url,this.username=t.username,this.email=t.email,this.groups=t.groups?t.groups:null,this.last_login=t.last_login?t.last_login:null,this.date_joined=t.date_joined?t.date_joined:null}return Object(ae.a)(e,[{key:"toJSON",value:function(){return{id:this.id?this.id:"",url:this.url,username:this.username,email:this.email,groups:this.groups,last_login:this.last_login,date_joined:this.date_joined}}}]),e}(),he=function(){function e(){Object(ne.a)(this,e),this.apiUrl="https://sheltered-bastion-53879.herokuapp.com/",this.axiosInstance=se.a.create({baseURL:this.apiUrl,headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}})}return Object(ae.a)(e,[{key:"getAllUsersPromise",value:function(){return this.axiosInstance.request({method:"GET",url:"/users"})}},{key:"getUserByIdPromise",value:function(e){return this.axiosInstance.request({method:"GET",url:"/users/"+e})}},{key:"postUser",value:function(e){return this.axiosInstance.request({method:"POST",url:"/users/",data:e.toJSON()})}},{key:"updateUserPromise",value:function(e){return this.axiosInstance.request({method:"PUT",url:"/users/"+e.id+"/",data:e.toJSON()})}}]),e}(),be=Z.b({title:Z.c().min(10,"Ticket title should be of minimum 8 characters length").required("Ticket title is required"),description:Z.c().required("Ticket description is required"),dueDate:Z.a().required("dueDate must be a `date` type")});function me(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)([]),c=Object(d.a)(s,2),o=c[0],l=c[1],j=new ce,h=new he,b=Object(E.g)();Object(a.useEffect)((function(){j.getAllProjectPromise().then((function(e){var t=e.data.map((function(e){return new ue(e)}));r(t),console.log(i)}))}),[]),Object(a.useEffect)((function(){h.getAllUsersPromise().then((function(e){var t=e.data.map((function(e){return new je(e)}));l(t)}))}),[]);var m=Object($.a)({initialValues:{title:"",description:"",dueDate:null,priority:"",project:"",assignedUserId:""},validationSchema:be,onSubmit:function(t){var n=new ie({title:t.title,description:t.description,due_date:t.dueDate&&new Date(t.dueDate),priority:t.priority,project:t.project,assigned_user:t.assignedUserId});j.postTicket(n).catch((function(e){})).then((function(t){b.push("/tickets"),e.onClose()}))}});return Object(D.jsx)(a.Fragment,{children:Object(D.jsx)("form",{onSubmit:m.handleSubmit,children:Object(D.jsxs)(Q.a,{container:!0,spacing:3,children:[Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{required:!0,id:"title",name:"title",label:"Title",fullWidth:!0,variant:"standard",value:m.values.title,onChange:m.handleChange,error:m.touched.title&&Boolean(m.errors.title),helperText:m.touched.title&&m.errors.title})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"project",name:"project",label:"Project",fullWidth:!0,variant:"standard",value:m.values.project,onChange:function(e){return m.setFieldValue("project",e.target.value)},onBlur:m.handleBlur,children:i.map((function(e){return Object(D.jsx)(ee.a,{value:e.id,children:e.name},e.id)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:3,children:Object(D.jsx)(oe.b,{dateAdapter:de.a,children:Object(D.jsx)(le.a,{label:"Due Date",value:m.values.dueDate,inputFormat:"dd-MM-yyyy HH:mm",onChange:function(e){return m.setFieldValue("dueDate",e)},minDate:new Date,renderInput:function(e){return Object(D.jsx)(K.a,Object(u.a)({id:"due_date",name:"due_date",label:"Due Date",fullWidth:!0,variant:"standard",onChange:m.handleChange,onBlur:m.handleBlur},e))}})})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:1,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"priority",name:"priority",label:"Priority",fullWidth:!0,variant:"standard",value:m.values.priority,onChange:function(e){return m.setFieldValue("priority",e.target.value)},onBlur:m.handleBlur,children:[{label:"LOW",value:1},{label:"MEDIUM",value:2},{label:"HIGH",value:3}].map((function(e){return Object(D.jsx)(ee.a,{value:e.value,children:e.value},e.label)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"assigned",name:"assigned",label:"Assigned",fullWidth:!0,variant:"standard",value:m.values.assignedUserId,onChange:function(e){return m.setFieldValue("assignedUserId",e.target.value)},onBlur:m.handleBlur,children:o.map((function(e){return Object(D.jsx)(ee.a,{value:e.id,children:e.username},e.id)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:12,children:Object(D.jsx)(K.a,{required:!0,id:"description",name:"description",label:"Description",fullWidth:!0,variant:"standard",multiline:!0,rows:8,value:m.values.description,onChange:m.handleChange,error:m.touched.description&&Boolean(m.errors.description),helperText:m.touched.description&&m.errors.description})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(te.a,{spacing:2,direction:"row",children:[Object(D.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Submit"}),Object(D.jsx)(B.a,{color:"primary",variant:"outlined",onClick:function(){return e.onClose()},children:"Cancel"})]})})]})})})}function pe(e){return Object(D.jsx)("div",{id:"add-ticket",children:Object(D.jsx)(J.a,{open:e.modalIsOpen,children:Object(D.jsx)(G.a,{sx:{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",height:"85%",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4},children:Object(D.jsxs)(Q.a,{container:!0,spacing:{md:0},columns:{xs:4,sm:8,md:12},padding:{md:.6},justifyContent:"space-between",children:[Object(D.jsx)(X.a,{variant:"h4",gutterBottom:!0,noWrap:!0,children:"Add Ticket"}),Object(D.jsx)(Q.a,{item:!0,xs:4,sm:8,md:12,children:Object(D.jsx)(me,{onClose:e.onClose})})]})})})})}var Oe=Z.b({name:Z.c().min(3,"Project name should be of minimum 3 characters length").required("project name is required")});function xe(e){var t=new ce;function n(){i.resetForm(),e.onClose()}var i=Object($.a)({initialValues:{name:e.project?e.project.name:""},validationSchema:Oe,onSubmit:function(a){e.project?function(e,a){e.name=a.name,t.updateProjectPromise(e).catch((function(e){})).then((function(e){n()}))}(e.project,a):function(e){var a=new ue({name:e.name});t.postProject(a).catch((function(e){})).then((function(e){n()}))}(a)}});return Object(a.useEffect)((function(){var t;e.project&&i.setFieldValue("name",null===(t=e.project)||void 0===t?void 0:t.name)}),[e.project]),Object(D.jsx)(a.Fragment,{children:Object(D.jsx)(J.a,{open:e.modalIsOpen,children:Object(D.jsx)(G.a,{sx:{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4},children:Object(D.jsx)("form",{onSubmit:i.handleSubmit,children:Object(D.jsxs)(Q.a,{container:!0,spacing:3,children:[Object(D.jsx)(Q.a,{item:!0,xs:12,sm:12,children:Object(D.jsx)(K.a,{required:!0,id:"name",name:"name",label:"Name",fullWidth:!0,variant:"standard",value:i.values.name,onChange:i.handleChange,error:i.touched.name&&Boolean(i.errors.name),helperText:i.touched.name&&i.errors.name})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(te.a,{spacing:2,direction:"row",children:[Object(D.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Submit"}),Object(D.jsx)(B.a,{color:"primary",variant:"outlined",onClick:function(){return n()},children:"Cancel"})]})})]})})})})})}function ge(e){var t,n,i,r=Object(E.h)(),s=a.useState(!1),c=Object(d.a)(s,2),o=c[0],l=c[1];switch(r.pathname){case"/tickets":t="+ Add ticket",i=!0,n=Object(D.jsx)(pe,{modalIsOpen:o,onClose:u});break;case"/projects":t="+ Add project",i=!0,n=Object(D.jsx)(xe,{modalIsOpen:o,onClose:u});break;case"/users":i=!0;break;default:t=""}function u(){l(!1)}return Object(D.jsxs)("div",{id:"top-header",children:[n,Object(D.jsxs)(F.a,{className:"app-bar",children:[Object(D.jsx)(Y.a,{children:t?Object(D.jsxs)(B.a,{variant:"outlined",size:"medium",onClick:function(){return l(!0)},children:[t," "]}):""}),Object(D.jsxs)(Y.a,{children:[i?Object(D.jsx)(H,{type:"input",placeholder:" Search...",label:"search",name:"search",value:e.searchText,onChange:function(t){return e.setSearchText(t.target.value)}}):"",e.logged_in?Object(D.jsx)("li",{onClick:e.handle_logout,style:{marginRight:16,cursor:"pointer",listStyle:"none"},children:Object(D.jsx)(q.a,{})}):"",Object(D.jsx)(k.a,{to:"/",children:Object(D.jsx)(U.a,{})})]})]})]})}function fe(){return Object(D.jsxs)(a.Fragment,{children:[Object(D.jsx)(X.a,{variant:"h1",gutterBottom:!0,children:"Dashboard"}),Object(D.jsx)(Q.a,{container:!0,spacing:2,children:Object(D.jsx)(Q.a,{item:!0,xs:12,md:6,children:Object(D.jsx)(X.a,{variant:"body1",children:"Welcome to the ticket tickets application. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer consequat velit sem, ultrices cursus augue lacinia a. Quisque consequat ac neque ut convallis. Sed velit arcu, vestibulum ut lacus vel, fermentum faucibus augue. Vivamus justo felis, consectetur eu accumsan a, faucibus at diam."})})})]})}var ve=n(477),we=n(471),ye=n(473),Se=n(469),Ce=n(470),ke=n(457),De=n(445),_e=n(443),Pe=Object(_e.a)({table:{marginTop:"20px","& thead th":{fontWeight:"600"},"& tbody td":{fontWeight:"200"},"& tbody tr:hover":{backgroundColor:"#fffbf2",cursor:"pointer"}},paginationContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-end",padding:"1em",fontSize:".75em"},paginationSelect:{width:45,border:0},paginationSection:{display:"flex",alignItems:"center",justifyContent:"center"},paginationText:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',margin:"0.75em"}});function Ie(e,t,n){var r=Pe(),s=[5,10,25],c=Object(a.useState)(1),o=Object(d.a)(c,2),l=o[0],u=o[1],j=i.a.useState(s[0]),h=Object(d.a)(j,2),b=h[0],m=h[1],p=i.a.useState("asc"),O=Object(d.a)(p,2),x=O[0],g=O[1],f=i.a.useState(""),v=Object(d.a)(f,2),w=v[0],y=v[1];function S(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}return{TblContainer:function(e){return Object(D.jsx)(Se.a,{className:r.table,children:e.children})},TblHead:function(){return Object(D.jsx)(Ce.a,{children:Object(D.jsx)(we.a,{children:t.map((function(e){return Object(D.jsx)(ye.a,{children:Object(D.jsx)(ke.a,{active:w===e.id,direction:w===e.id?x:"asc",onClick:function(){var t;t=e.id,g(w===t&&"asc"===x?"desc":"asc"),y(t)},children:e.label})},e.id)}))})})},TblPagination:function(){return Object(D.jsxs)("div",{className:r.paginationContainer,children:[Object(D.jsx)("div",{className:r.paginationText,children:"Rows Per Page:"}),Object(D.jsx)("select",{onChange:function(e){m(parseInt(e.target.value,10)),u(1)},value:b,className:r.paginationSelect,children:s.map((function(e){return Object(D.jsx)("option",{value:e,children:e},e)}))}),Object(D.jsx)(De.a,{className:r.paginationSection,count:Math.ceil(n.fn(e).length/b),page:l,onChange:function(e,t){u(t)},showFirstButton:!0,showLastButton:!0})]})},recordsAfterPagingAndSorting:function(){return function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}(n.fn(e),function(e,t){return"desc"===e?function(e,n){return S(e,n,t)}:function(e,n){return-S(e,n,t)}}(x,w)).slice((l-1)*b,l*b)},resetPage:function(){if(1!==l)return u(1)}}}var Te=n(46),qe=n.n(Te),Ue=n(203),Fe=n.n(Ue),Ye=n(204),Be=n.n(Ye),Ee=n(461),Ae=n(205),We=n.n(Ae),Le=n(476),Me=n(206),Ne=n(456);var Ve=function(e){var t,n,a=e.ticket,r=Object(Le.a)(Object(Me.a)());return a?Object(D.jsxs)(i.a.Fragment,{children:[Object(D.jsx)(Q.a,{item:!0,xs:3,sm:6,md:10,children:Object(D.jsx)(Ne.a,{theme:r,children:Object(D.jsx)(X.a,{variant:"h4",gutterBottom:!0,noWrap:!0,children:"#"+a.id+" "+a.title})})}),Object(D.jsxs)(Q.a,{item:!0,xs:"auto",sm:"auto",md:"auto",container:!0,display:"inline",alignContent:"center",children:[Object(D.jsx)(Q.a,{item:!0,display:"inline",justifyContent:"space-between",children:Object(D.jsx)(Ee.a,{onClick:function(){e.onEdit()},children:Object(D.jsx)(Fe.a,{fontSize:"large"})})}),Object(D.jsx)(Q.a,{item:!0,display:"inline",paddingLeft:{xs:1,sm:2,md:2},children:Object(D.jsxs)(Ee.a,{onClick:function(){e.onClose()},children:[Object(D.jsx)(Be.a,{fontSize:"large"})," "]})})]}),Object(D.jsxs)(Q.a,{item:!0,container:!0,spacing:1,children:[Object(D.jsx)(Q.a,{item:!0,children:Object(D.jsx)(X.a,{variant:"body1",fontSize:"small",children:Object(D.jsx)("strong",{children:"Assigned:"})})}),Object(D.jsx)(Q.a,{item:!0,children:Object(D.jsx)(We.a,{fontSize:"small"})}),Object(D.jsx)(Q.a,{item:!0,children:Object(D.jsx)(X.a,{variant:"body1",fontSize:"small",children:a.assignedUserName})})]}),Object(D.jsxs)(Q.a,{item:!0,container:!0,children:[Object(D.jsx)(Q.a,{item:!0,xs:4,sm:4,md:2,children:Object(D.jsxs)(X.a,{variant:"body1",fontSize:"small",children:[Object(D.jsx)("strong",{children:"Created:"})," ",null===(t=a.createdDate)||void 0===t?void 0:t.toDateString()]})}),Object(D.jsx)(Q.a,{item:!0,children:Object(D.jsxs)(X.a,{variant:"body1",fontSize:"small",children:[Object(D.jsx)("strong",{children:"Due:"})," ",null===(n=a.dueDate)||void 0===n?void 0:n.toDateString()]})})]}),Object(D.jsxs)(Q.a,{item:!0,container:!0,children:[Object(D.jsx)(Q.a,{item:!0,xs:4,sm:2,md:2,children:Object(D.jsxs)(X.a,{variant:"body1",fontSize:"small",children:[Object(D.jsx)("strong",{children:"Status:"})," ",a.status]})}),Object(D.jsx)(Q.a,{item:!0,xs:4,sm:2,md:2,children:Object(D.jsxs)(X.a,{variant:"body1",fontSize:"small",children:[Object(D.jsx)("strong",{children:"Severity:"})," Placeholder"]})}),Object(D.jsx)(Q.a,{item:!0,xs:4,sm:2,md:2,children:Object(D.jsxs)(X.a,{variant:"body1",fontSize:"small",children:[Object(D.jsx)("strong",{children:"Priority:"})," ",a.priority]})}),Object(D.jsx)(Q.a,{item:!0,xs:4,sm:2,md:2,children:Object(D.jsxs)(X.a,{variant:"body1",fontSize:"small",children:[Object(D.jsx)("strong",{children:"Project:"})," ",a.project_name]})})]})]}):Object(D.jsx)(i.a.Fragment,{children:"loading"})};var Re=function(e){var t=e.ticket;return t?Object(D.jsxs)(Q.a,{item:!0,xs:4,sm:8,md:12,children:[Object(D.jsx)(X.a,{variant:"body1",children:Object(D.jsx)("strong",{children:"Description"})}),Object(D.jsx)(X.a,{variant:"body1",children:t.description})]}):Object(D.jsx)("p",{children:"loading..."})},ze={position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",height:"85%",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4,overflow:"auto"};var He=function(e){return Object(D.jsx)(J.a,{open:e.modalIsOpen,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",onBackdropClick:function(){e.onClose()},children:Object(D.jsx)(G.a,{sx:ze,children:Object(D.jsxs)(Q.a,{container:!0,spacing:{md:0},columns:{xs:4,sm:8,md:12},padding:{md:.6},justifyContent:"space-between",children:[Object(D.jsx)(Ve,{ticket:e.ticket,onClose:e.onClose,onEdit:e.onEdit}),Object(D.jsx)(C.a,{style:{width:"100%",margin:20}}),Object(D.jsx)(Re,{ticket:e.ticket})]})})})},Je=Z.b({title:Z.c().min(10,"Ticket title should be of minimum 8 characters length").required("Ticket title is required"),description:Z.c().required("Ticket description is required")});function Ge(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)([]),c=Object(d.a)(s,2),o=c[0],l=c[1],j=new ce,h=new he,b=e.ticket;Object(a.useEffect)((function(){j.getAllProjectPromise().then((function(e){var t=e.data.map((function(e){return new ue(e)}));r(t)}))}),[]),Object(a.useEffect)((function(){h.getAllUsersPromise().then((function(e){var t=e.data.map((function(e){return new je(e)}));l(t)}))}),[]);var m=Object($.a)({initialValues:{title:null===b||void 0===b?void 0:b.title,description:null===b||void 0===b?void 0:b.description,dueDate:null===b||void 0===b?void 0:b.dueDate,createdDate:null===b||void 0===b?void 0:b.createdDate,updatedDate:null===b||void 0===b?void 0:b.updatedDate,status:null===b||void 0===b?void 0:b.status,assignedUserId:null===b||void 0===b?void 0:b.assignedUserId,priority:null===b||void 0===b?void 0:b.priority,project:b?b.project:""},validationSchema:Je,onSubmit:function(t){var n=new ie({id:null===b||void 0===b?void 0:b.id,title:t.title,description:t.description,due_date:t.dueDate&&new Date(t.dueDate),created_at:null===b||void 0===b?void 0:b.createdDate,updated_at:null===b||void 0===b?void 0:b.updatedDate,status:t.status,priority:t.priority,project:t.project,assigned_user:t.assignedUserId});j.updateTicketPromise(n).then((function(t){e.onClose()})).catch((function(e){}))}});return Object(D.jsx)(a.Fragment,{children:Object(D.jsx)("form",{onSubmit:m.handleSubmit,children:Object(D.jsxs)(Q.a,{container:!0,spacing:3,children:[Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{required:!0,id:"title",name:"title",label:"Title",fullWidth:!0,variant:"standard",value:m.values.title,onChange:m.handleChange,error:m.touched.title&&Boolean(m.errors.title),helperText:m.touched.title&&m.errors.title})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"project",name:"project",label:"Project",fullWidth:!0,variant:"standard",value:m.values.project,onChange:function(e){return m.setFieldValue("project",e.target.value)},onBlur:m.handleBlur,children:i.map((function(e){return Object(D.jsx)(ee.a,{value:e.id,children:e.name},e.id)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"status",name:"status",label:"Status",fullWidth:!0,variant:"standard",value:m.values.status,onChange:function(e){return m.setFieldValue("status",e.target.value)},onBlur:m.handleBlur,children:[{label:"Unassigned",value:1},{label:"Open",value:2},{label:"In Progress",value:3},{label:"Resolved",value:4},{label:"Done",value:5},{label:"Re-opened",value:6}].map((function(e){return Object(D.jsx)(ee.a,{value:e.label,children:e.label},e.value)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{required:!0,id:"category",name:"category",label:"Category",fullWidth:!0,variant:"standard",disabled:!0})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:3,children:Object(D.jsx)(oe.b,{dateAdapter:de.a,children:Object(D.jsx)(le.a,{label:"Due Date",value:m.values.dueDate,inputFormat:"dd-MM-yyyy HH:mm",onChange:function(e){return m.setFieldValue("dueDate",e)},minDate:m.initialValues.createdDate,maxDate:new Date,renderInput:function(e){return Object(D.jsx)(K.a,Object(u.a)({id:"due_date",name:"due_date",label:"Due Date",fullWidth:!0,variant:"standard"},e))}})})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:1,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"priority",name:"priority",label:"Priority",fullWidth:!0,variant:"standard",value:m.values.priority,onChange:function(e){return m.setFieldValue("priority",e.target.value)},onBlur:m.handleBlur,children:[{label:"LOW",value:1},{label:"MEDIUM",value:2},{label:"HIGH",value:3}].map((function(e){return Object(D.jsx)(ee.a,{value:e.value,children:e.value},e.label)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{select:!0,required:!0,id:"assigned",name:"assigned",label:"Assigned",fullWidth:!0,variant:"standard",value:m.values.assignedUserId,onChange:function(e){return m.setFieldValue("assignedUserId",e.target.value)},onBlur:m.handleBlur,children:o.map((function(e){return Object(D.jsx)(ee.a,{value:e.id,children:e.username},e.id)}))})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:12,children:Object(D.jsx)(K.a,{required:!0,id:"description",name:"description",label:"Description",fullWidth:!0,variant:"standard",multiline:!0,rows:8,value:m.values.description,onChange:m.handleChange,error:m.touched.description&&Boolean(m.errors.description),helperText:m.touched.description&&m.errors.description})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(te.a,{spacing:2,direction:"row",children:[Object(D.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Submit"}),Object(D.jsx)(B.a,{color:"primary",variant:"outlined",onClick:function(){return e.onClose()},children:"Cancel"})]})})]})})})}function Qe(e){return Object(D.jsx)("div",{children:Object(D.jsx)(J.a,{open:!0,children:Object(D.jsx)(G.a,{sx:{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",height:"85%",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4},children:Object(D.jsxs)(Q.a,{container:!0,spacing:{md:0},columns:{xs:4,sm:8,md:12},padding:{md:.6},justifyContent:"space-between",children:[void 0!==e.ticket?Object(D.jsxs)(X.a,{variant:"h4",children:["Edit Ticket Number ","#"+e.ticket.id," "]}):"",Object(D.jsx)(Ge,{onClose:e.onClose,ticket:e.ticket})]})})})})}var Xe=[{id:"id",label:" Number"},{id:"title",label:"Title"},{id:"description",label:"Description"},{id:"project_name",label:"Project"},{id:"dueDate",label:"Due"},{id:"createDate",label:"Created"},{id:"updateDate",label:"Updated"},{id:"status",label:"Status"}],Ke=new ce;function Ze(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)({fn:function(e){return r}}),o=Object(d.a)(c,2),l=o[0],u=o[1],j=Ie(r,Xe,l),h=j.TblContainer,b=j.TblHead,m=j.TblPagination,p=j.recordsAfterPagingAndSorting,O=j.resetPage,x=i.a.useState(""),g=Object(d.a)(x,2)[1],f=Object(a.useState)(),v=Object(d.a)(f,2),w=v[0],y=v[1],S=Object(a.useState)(!1),C=Object(d.a)(S,2),k=C[0],_=C[1],P=Object(a.useState)(!1),I=Object(d.a)(P,2),T=I[0],q=I[1];function U(){Ke.getAllTicketsPromise().then((function(e){var t=e.data.map((function(e){return new ie(e)}));s(t),u({fn:function(e){return e}})})).catch((function(e){}))}return Object(a.useEffect)(U,[]),Object(a.useEffect)((function(){var t;t=e.searchTextInput,O(),g(t),u({fn:function(e){return""===t?e:e.filter((function(e){return e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||qe()(e.dueDate).format("DD-MM-YYYY").includes(t)||qe()(e.createdDate).format("DD-MM-YYYY").includes(t)||qe()(e.updatedDate).format("DD-MM-YYYY").includes(t)}))}})}),[e]),Object(D.jsxs)(i.a.Fragment,{children:[k?Object(D.jsx)(He,{ticket:w,modalIsOpen:k,onClose:function(){U(),_(!1)},onEdit:function(){_(!1),q(!0)}}):"",T?Object(D.jsx)(Qe,{onClose:function(){U(),q(!1)},ticket:w}):"",Object(D.jsx)(X.a,{variant:"h1",children:"Tickets"}),Object(D.jsxs)(h,{children:[Object(D.jsx)(b,{}),Object(D.jsx)(ve.a,{children:p().map((function(e){return Object(D.jsxs)(we.a,{onClick:function(){return function(e){var t=e;Ke.getTicketByIdPromise(t).then((function(e){var t=new ie(e.data);y(t),_(!0)})).catch((function(e){console.log(e)}))}(e.id)},children:[Object(D.jsxs)(ye.a,{children:[e.id," "]}),Object(D.jsxs)(ye.a,{children:[e.title," "]}),Object(D.jsx)(ye.a,{children:(t=e.description,n=200,t.length>n?t.substring(0,n):t)}),Object(D.jsxs)(ye.a,{children:[e.project_name," "]}),Object(D.jsx)(ye.a,{children:qe()(e.dueDate,"DD-MM-YYYY").isValid()?qe()(e.dueDate).format("DD-MM-YYYY"):" "}),Object(D.jsx)(ye.a,{children:qe()(e.createdDate,"DD-MM-YYYY").isValid()?qe()(e.createdDate).format("DD-MM-YYYY"):" "}),Object(D.jsx)(ye.a,{children:qe()(e.updatedDate,"DD-MM-YYYY").isValid()?qe()(e.updatedDate).format("DD-MM-YYYY"):" "}),Object(D.jsxs)(ye.a,{children:[e.status," "]})]},e.id);var t,n}))})]}),Object(D.jsx)(m,{})]})}var $e=n(458),et=n(450),tt=n(444),nt=function(){function e(t){Object(ne.a)(this,e),this.url=void 0,this.name=void 0,this.url=t.url,this.name=t.name}return Object(ae.a)(e,[{key:"toJSON",value:function(){return{url:this.url,name:this.name}}}]),e}(),at=function(){function e(){Object(ne.a)(this,e),this.apiUrl="https://sheltered-bastion-53879.herokuapp.com/",this.axiosInstance=se.a.create({baseURL:this.apiUrl})}return Object(ae.a)(e,[{key:"getAllRolesPromise",value:function(){return this.axiosInstance.request({method:"GET",url:"/roles",headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}})}}]),e}();function it(e){var t=new he,n=e.user,i=Object(a.useState)([]),r=Object(d.a)(i,2),s=r[0],c=r[1],o=new at,l=Object($.a)({initialValues:{username:null===n||void 0===n?void 0:n.username,email:null===n||void 0===n?void 0:n.email,groups:null===n||void 0===n?void 0:n.groups,last_login:null===n||void 0===n?void 0:n.last_login,date_joined:null===n||void 0===n?void 0:n.date_joined},onSubmit:function(a){var i=new je({id:null===n||void 0===n?void 0:n.id,username:a.username,email:a.email,groups:a.groups,last_login:null===n||void 0===n?void 0:n.last_login,date_joined:null===n||void 0===n?void 0:n.date_joined});t.updateUserPromise(i).then((function(t){e.onClose()})).catch((function(e){}))}});return Object(a.useEffect)((function(){o.getAllRolesPromise().then((function(e){var t=e.data.map((function(e){return new nt(e)}));c(t)}))}),[]),Object(D.jsx)(a.Fragment,{children:Object(D.jsx)("form",{style:{width:"100%"},onSubmit:l.handleSubmit,children:Object(D.jsxs)(Q.a,{container:!0,spacing:3,children:[Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{required:!0,id:"username",name:"username",label:"Username",fullWidth:!0,variant:"standard",value:l.values.username,onChange:l.handleChange})}),Object(D.jsx)(Q.a,{item:!0,xs:12,sm:4,children:Object(D.jsx)(K.a,{required:!0,id:"email",name:"email",label:"Email",fullWidth:!0,variant:"standard",value:l.values.email,onChange:l.handleChange})}),Object(D.jsxs)(Q.a,{item:!0,xs:12,sm:4,children:[Object(D.jsx)(et.a,{style:{fontSize:"0.75rem"},id:"roles-label",children:"Roles"}),Object(D.jsx)(tt.a,{labelId:"roles-label",id:"groups",name:"groups",label:"Roles",fullWidth:!0,multiple:!0,variant:"standard",value:l.values.groups,onChange:l.handleChange,renderValue:function(e){return Object(D.jsx)(G.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){var t=s.find((function(t){return t.url===e}));return Object(D.jsx)($e.a,{label:null===t||void 0===t?void 0:t.name},e)}))})},children:s.map((function(e){return Object(D.jsx)(ee.a,{value:e.url,children:e.name},e.url)}))})]}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(te.a,{spacing:2,direction:"row",children:[Object(D.jsx)(B.a,{color:"primary",variant:"contained",type:"submit",children:"Submit"}),Object(D.jsx)(B.a,{color:"primary",variant:"outlined",onClick:function(){return e.onClose()},children:"Cancel"})]})})]})})})}function rt(e){return Object(D.jsx)("div",{children:Object(D.jsx)(J.a,{open:!0,children:Object(D.jsx)(G.a,{sx:{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85%",height:"85%",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4},children:Object(D.jsxs)(Q.a,{container:!0,spacing:{md:0},columns:{xs:4,sm:8,md:12},padding:{md:.6},justifyContent:"space-between",children:[Object(D.jsx)(X.a,{variant:"h4",children:"Edit User"}),Object(D.jsx)(it,{onClose:e.onClose,user:e.user})]})})})})}var st=new he,ct=new at,ot=[{id:"username",label:"Name"},{id:"email",label:"Email"},{id:"groups",label:"Roles"},{id:"last_login",label:"Last Login"},{id:"date_joined",label:"Created"}];function lt(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)([]),o=Object(d.a)(c,2),l=o[0],u=o[1],j=Object(a.useState)({fn:function(e){return l}}),h=Object(d.a)(j,2),b=h[0],m=h[1],p=Ie(l,ot,b),O=p.TblContainer,x=p.TblHead,g=p.TblPagination,f=p.recordsAfterPagingAndSorting,v=p.resetPage,w=i.a.useState(""),y=Object(d.a)(w,2)[1],S=Object(a.useState)(),C=Object(d.a)(S,2),k=C[0],_=C[1],P=Object(a.useState)([]),I=Object(d.a)(P,2),T=I[0],q=I[1];function U(){st.getAllUsersPromise().then((function(e){var t=e.data.map((function(e){return new je(e)}));u(t),m({fn:function(e){return e}})})).catch((function(e){}))}return Object(a.useEffect)(U,[]),Object(a.useEffect)((function(){var t;t=e.searchTextInput,v(),y(t),m({fn:function(e){return""===t?e:e.filter((function(e){return e.username.toLowerCase().includes(t)}))}}),y("")}),[e]),Object(a.useEffect)((function(){ct.getAllRolesPromise().then((function(e){var t=e.data.map((function(e){return new nt(e)}));q(t)}))}),[]),Object(D.jsxs)(i.a.Fragment,{children:[r?Object(D.jsx)(rt,{onClose:function(){U(),s(!1)},user:k}):"",Object(D.jsx)(X.a,{variant:"h1",children:"Users"}),Object(D.jsxs)(O,{children:[Object(D.jsx)(x,{}),Object(D.jsx)(ve.a,{children:f().map((function(e){return Object(D.jsxs)(we.a,{onClick:function(){return function(e){var t=e;(new he).getUserByIdPromise(t).then((function(e){var t=new je(e.data);_(t),s(!0)})).catch((function(e){console.log(e)}))}(e.id)},children:[Object(D.jsxs)(ye.a,{children:[e.username," "]}),Object(D.jsxs)(ye.a,{children:[e.email," "]}),Object(D.jsx)(ye.a,{children:Object(D.jsx)(G.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.groups.toString().split(",").map((function(e){var t=T.find((function(t){return t.url===e}));return"undefined"!==typeof t&&Object(D.jsx)($e.a,{label:null===t||void 0===t?void 0:t.name},null===t||void 0===t?void 0:t.url)}))})}),Object(D.jsxs)(ye.a,{children:[qe()(e.last_login).format("DD-MM-YYYY HH:mm")," "]}),Object(D.jsxs)(ye.a,{children:[qe()(e.date_joined).format("DD-MM-YYYY HH:mm")," "]})]},e.id)}))})]}),Object(D.jsx)(g,{})]})}function dt(){return Object(D.jsxs)(a.Fragment,{children:[Object(D.jsx)(X.a,{variant:"h1",gutterBottom:!0,children:"Settings"}),Object(D.jsx)(Q.a,{container:!0,spacing:2,children:Object(D.jsx)(Q.a,{item:!0,xs:12,md:6,children:Object(D.jsx)(X.a,{variant:"body1",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer consequat velit sem, ultrices cursus augue lacinia a. Quisque consequat ac neque ut convallis. Sed velit arcu, vestibulum ut lacus vel, fermentum faucibus augue. Vivamus justo felis, consectetur eu accumsan a, faucibus at diam."})})})]})}var ut=n(439),jt=n(440),ht=n(467),bt=n(474),mt=n(459);function pt(e){var t=a.useState({showPassword:!1,username:"",password:""}),n=Object(d.a)(t,2),i=n[0],r=n[1],s=Object($.a)({initialValues:{username:"",password:""},onSubmit:function(t){var n={showPassword:!1,username:t.username,password:t.password};e.handle_login(n)}});return Object(D.jsx)(a.Fragment,{children:Object(D.jsx)("form",{onSubmit:s.handleSubmit,children:Object(D.jsxs)(Q.a,{container:!0,spacing:2,children:[Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsx)(X.a,{variant:"h1",children:"Login"})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(ht.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(et.a,{htmlFor:"username",children:"Username"}),Object(D.jsx)(bt.a,{required:!0,id:"username",value:s.values.username,onChange:s.handleChange})]})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(ht.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(et.a,{htmlFor:"password",children:"Password"}),Object(D.jsx)(bt.a,{required:!0,id:"password",type:i.showPassword?"text":"password",value:s.values.password,onChange:s.handleChange,endAdornment:Object(D.jsx)(mt.a,{position:"end",children:Object(D.jsx)(Ee.a,{onClick:function(){r(Object(u.a)(Object(u.a)({},i),{},{showPassword:!i.showPassword}))},children:i.showPassword?Object(D.jsx)(ut.a,{}):Object(D.jsx)(jt.a,{})})})})]})}),Object(D.jsx)(Q.a,{item:!0,xs:3,children:Object(D.jsx)(B.a,{variant:"outlined",type:"submit",fullWidth:!0,children:"Login"})}),Object(D.jsx)(Q.a,{item:!0,xs:3,children:Object(D.jsx)(B.a,{component:k.a,to:"/register",children:"Don't have an account yet?"})})]})})})}function Ot(e){var t=a.useState({showPassword:!1,username:"",email:"",password:""}),n=Object(d.a)(t,2),i=n[0],r=n[1],s=Object($.a)({initialValues:{username:"",email:"",password:""},onSubmit:function(t){var n={showPassword:!1,username:t.username,email:t.email,password:t.password};e.handle_register(n)}});return Object(D.jsx)(a.Fragment,{children:Object(D.jsx)("form",{onSubmit:s.handleSubmit,children:Object(D.jsxs)(Q.a,{container:!0,spacing:2,children:[Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsx)(X.a,{variant:"h1",children:"Register"})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(ht.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(et.a,{htmlFor:"username",children:"Username"}),Object(D.jsx)(bt.a,{required:!0,id:"username",value:s.values.username,onChange:s.handleChange})]})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(ht.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(et.a,{htmlFor:"email",children:"Email"}),Object(D.jsx)(bt.a,{required:!0,id:"email",type:"email",value:s.values.email,onChange:s.handleChange})]})}),Object(D.jsx)(Q.a,{item:!0,xs:12,children:Object(D.jsxs)(ht.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(et.a,{htmlFor:"password",children:"Password"}),Object(D.jsx)(bt.a,{required:!0,id:"password",inputProps:{minLength:8},type:i.showPassword?"text":"password",value:s.values.password,onChange:s.handleChange,endAdornment:Object(D.jsx)(mt.a,{position:"end",children:Object(D.jsx)(Ee.a,{onClick:function(){r(Object(u.a)(Object(u.a)({},i),{},{showPassword:!i.showPassword}))},children:i.showPassword?Object(D.jsx)(ut.a,{}):Object(D.jsx)(jt.a,{})})})})]})}),Object(D.jsx)(Q.a,{item:!0,xs:3,children:Object(D.jsx)(B.a,{variant:"outlined",type:"submit",fullWidth:!0,children:"Register"})}),Object(D.jsx)(Q.a,{item:!0,xs:3,children:Object(D.jsx)(B.a,{component:k.a,to:"/",children:"Already have an account?"})})]})})})}var xt=n(39),gt=n(446),ft=n(207),vt=["component","isLoggedIn"];function wt(e){var t=e.component,n=e.isLoggedIn,a=Object(ft.a)(e,vt);return Object(D.jsx)(E.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return n?t:Object(D.jsx)(E.a,{to:{pathname:"/",state:{from:e.location}}})}}))}var yt=new ce,St=[{id:"id",label:"Id"},{id:"name",label:"Name"},{id:"delete",label:"Delete?"}];function Ct(e){var t=i.a.useState(!1),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)([]),o=Object(d.a)(c,2),l=o[0],u=o[1],j=Object(a.useState)({fn:function(e){return l}}),h=Object(d.a)(j,2),b=h[0],m=h[1],p=Ie(l,St,b),O=p.TblContainer,x=p.TblHead,g=p.TblPagination,f=p.recordsAfterPagingAndSorting,v=p.resetPage,w=i.a.useState(""),y=Object(d.a)(w,2)[1],S=Object(a.useState)(null),C=Object(d.a)(S,2),k=C[0],_=C[1];function P(){yt.getAllProjectPromise().then((function(e){var t=e.data.map((function(e){return new ue(e)}));u(t),m({fn:function(e){return e}})})).catch((function(e){}))}return window.addEventListener("load",(function(){P()})),Object(a.useEffect)(P,[]),Object(a.useEffect)((function(){var t;t=e.searchTextInput,v(),y(t),m({fn:function(e){return""===t?e:e.filter((function(e){return e.name.toLowerCase().includes(t)}))}}),y("")}),[e]),Object(D.jsxs)(i.a.Fragment,{children:[Object(D.jsx)(xe,{modalIsOpen:r,onClose:function(){s(!1),P()},project:k}),Object(D.jsx)(X.a,{variant:"h1",children:"Projects"}),Object(D.jsxs)(O,{children:[Object(D.jsx)(x,{}),Object(D.jsx)(ve.a,{children:f().map((function(e){return Object(D.jsxs)(we.a,{onClick:function(t){var n;"button"!==t.target.getAttribute("type")&&(n=new ue(e),_(n),s(!0))},children:[Object(D.jsxs)(ye.a,{children:[e.id," "]}),Object(D.jsxs)(ye.a,{children:[e.name," "]}),Object(D.jsx)(ye.a,{children:Object(D.jsx)(B.a,{onClick:function(){var t;window.confirm("Are you sure to delete this project?")&&(t=new ue(e),yt.deleteProject(t).then((function(e){return P()})))},children:"Delete"})})]},e.id)}))})]}),Object(D.jsx)(g,{})]})}var kt,Dt=Object(xt.a)();var _t=function(){var e=a.useState(""),t=Object(d.a)(e,2),n=t[0],i=t[1],r=a.useState({logged_in:!!localStorage.getItem("token"),username:""}),s=Object(d.a)(r,2),c=s[0],u=s[1],j=a.useState({status:"",show_message:!1,message:""}),h=Object(d.a)(j,2),b=h[0],m=h[1];function p(){localStorage.removeItem("token"),u({logged_in:!1,username:""}),clearInterval(kt)}function O(){kt=setInterval((function(){x()}),5e5)}function x(){fetch("https://sheltered-bastion-53879.herokuapp.com/token-refresh/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(e){void 0!==e.user?(localStorage.setItem("token",e.token),u({logged_in:!0,username:e.user.username})):p()})).catch((function(e){p()}))}return Dt.listen((function(e){m({status:"",show_message:!1,message:""}),i("")})),window.addEventListener("load",(function(){c.logged_in&&(x(),O())})),Object(D.jsxs)(E.c,{history:Dt,children:[Object(D.jsx)(T,{}),Object(D.jsx)(ge,{handle_logout:p,logged_in:c.logged_in,searchText:n,setSearchText:i}),Object(D.jsxs)("div",{id:"content",children:[b.show_message&&"error"===b.status?Object(D.jsx)(gt.a,{onClose:function(){m({status:"",show_message:!1,message:""})},className:"message",severity:"error",children:b.message}):"",b.show_message&&"success"===b.status?Object(D.jsx)(gt.a,{onClose:function(){m({status:"",show_message:!1,message:""})},className:"message",severity:"success",children:b.message}):"",Object(D.jsxs)(E.d,{children:[c.logged_in?"":Object(D.jsx)(E.b,{exact:!0,path:"/",children:Object(D.jsx)(pt,{handle_login:function(e){fetch("https://sheltered-bastion-53879.herokuapp.com/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0!==e.user?(m({status:"",show_message:!1,message:""}),localStorage.setItem("token",e.token),u({logged_in:!0,username:e.user.username}),O()):void 0!==e.non_field_errors?m({status:"error",show_message:!0,message:e.non_field_errors}):m({status:"error",show_message:!0,message:"Something went wrong while trying to login!"})})).catch((function(e){m({status:"error",show_message:!0,message:"Something went wrong while trying to login!"})}))}})}),c.logged_in?Object(D.jsx)(E.b,{exact:!0,path:"/",children:Object(D.jsx)(fe,{})}):Object(D.jsx)(E.b,{path:"/register",children:Object(D.jsx)(Ot,{handle_register:function(e){fetch("https://sheltered-bastion-53879.herokuapp.com/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw e})).then((function(){m({status:"success",show_message:!0,message:"Successfully registered account! Please login"})})).catch(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,a="Something went wrong while trying to register user!",void 0!==n.non_field_errors?a=n.non_field_errors:void 0!==n.username?a="Username: "+n.username:void 0!==n.email?a="Email: "+n.email:void 0!==n.password&&(a="Password: "+n.password),m({status:"error",show_message:!0,message:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})}),Object(D.jsx)(wt,{path:"/tickets",component:Object(D.jsx)(Ze,{searchTextInput:n}),isLoggedIn:c.logged_in}),Object(D.jsx)(wt,{path:"/users",component:Object(D.jsx)(lt,{searchTextInput:n}),isLoggedIn:c.logged_in}),Object(D.jsx)(wt,{path:"/settings",component:Object(D.jsx)(dt,{}),isLoggedIn:c.logged_in}),Object(D.jsx)(wt,{path:"/projects",component:Object(D.jsx)(Ct,{}),isLoggedIn:c.logged_in})]})]})]})},Pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,478)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(_t,{})}),document.getElementById("root")),Pt()}},[[352,1,2]]]);
//# sourceMappingURL=main.7c94ea31.chunk.js.map